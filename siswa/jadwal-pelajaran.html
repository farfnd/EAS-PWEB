<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- cdn  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <link rel='stylesheet' href='https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css'>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/assets/css/style.css" >

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://kit.fontawesome.com/330b1f288e.js" crossorigin="anonymous"></script>

    <title>Jadwal Pelajaran - SMA Pagi Sore</title>
</head>
<body>
    <main class="grid grid-cols-12 gap-x-20">
    <!-- sidebar  -->
      <div class="col-span-3 flex flex-col h-screen px-3 py-4 space-y-8 pl-5" style="background: #3E8CFF;">
          <a class="flex items-center space-x-3" href="/siswa">
              <img class="block w-16" src="/assets/img/logo.png" alt="Logo Sekolah">
              <div class="text-white flex flex-col">
                  <span class="text-lg">Siswa</span>
                  <span class="font-bold text-xl">SMA Pagi Sore</span>
              </div>
          </a>
          <ul class="text-white space-y-2 text-lg pl-3">
            <li ><a href="jadwal-pelajaran.html" class="space-x-1"><span class="inline-block text-white font-bold"><i class="fas fa-clock"></i>&nbsp;Jadwal Pelajaran</span></a></li>
              <li ><a href="daftar_guru.html" class="space-x-1"><span class="inline-block font-bold text-gray-400 hover:text-white"><i class="fas fa-users"></i>&nbsp;Daftar Guru</span></a></li>
              <li ><a href="/logout.php" class="space-x-1"><span class="inline-block font-bold text-gray-400 hover:text-white">Logout</span></a></li>
            </ul>
      </div>
    <!-- main content  -->
      <div class="col-span-9 font-semibold mr-10 space-y-2 min-h-screen">
        <!-- header  -->
        <h1 class="text-3xl mt-8">Jadwal Pelajaran Kelas XII A</h1>
        <div class="flex justify-between items-center text-lg ">
            <p class="text-gray-400">Minggu ke-30</p>
            <div class="flex items-center space-x-3 ">
                <span id="nama-siswa"></span>
                <img id="foto-siswa" class="block rounded-full w-12 h-12" src="/assets/img/foto-john-doe.png" alt="" onerror="this.onerror=null; this.src='/assets/img/placeholder.png'">
            </div>
        </div>
         <!-- Table -->
        <div class="mt-20 bg-red-400 mx-auto bg-white rounded-sm border border-gray-200">
            <div class="p-3">
                <div class="">
                    <table class="table-auto w-full" id="table-mapel">
                        <thead class="text-xs font-semibold uppercase text-gray-400 bg-gray-50">
                            <tr>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left">Jam Pelajaran</div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left">Waktu</div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left">Mata Pelajaran</div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left">Kode Guru</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="text-sm divide-y divide-gray-100">
                            <tr id="jp-1">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">1</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">07.30 - 08.10</div>
                                </td>
                            </tr>
                            <tr id="jp-2">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">2</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">08.10 - 08.50</div>
                                </td>
                            </tr>
                            <tr id="jp-3">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">3</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">08.50 - 09.30</div>
                                </td>
                            </tr>
                            <tr id="ist-1">
                                <td class="p-2 whitespace-nowrap">
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">09.30 - 10.00</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">Istirahat</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                </td>
                            </tr>
                            <tr id="jp-4">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">4</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">10.00 - 10.40</div>
                                </td>
                            </tr>
                            <tr id="jp-5">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">5</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">10.40 - 11.20</div>
                                </td>
                            </tr>
                            <tr id="jp-6">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">6</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">11.20 - 12.00</div>
                                </td>
                            </tr>
                            <tr id="jp-7">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">7</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">12.40 - 13.20</div>
                                </td>
                            </tr>
                            <tr id="ist-2">
                                <td class="p-2 whitespace-nowrap">
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">13.20 - 13.50</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">Istirahat</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                </td>
                            </tr>
                            <tr id="jp-8">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">8</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">13.50 - 14.10</div>
                                </td>
                            </tr>
                            <tr id="jp-9">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">9</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">14.10 - 14.50</div>
                                </td>
                            </tr>
                            <tr id="jp-10">
                                <td class="p-2 whitespace-nowrap">
                                    <div class="font-medium text-gray-800">10</div>
                                </td>
                                <td class="p-2 whitespace-nowrap">
                                    <div class="text-left">14.50 - 15.30</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
      </div>
  </main>

  <script>
      let nama;
      let increment = () => {
          let num = 0;
          return () => {
            return num += 1;
          }
      }

      let inc1 = increment();
      $.ajax({
          url: '/getName.php',
          method: "GET"
        }).done(response => {
            $("#nama-siswa").html(JSON.parse(response).nama)
            $("#foto-siswa").attr("src", `/assets/img/guru/${JSON.parse(response).foto  }`)
        })

      $.ajax({
          url: '/admin/R_mata_pelajaran.php',
          method: "GET",
          data: {
            type: 'all'
          },
          success: function(response) {
              console.log(response)
              var list = "";
              var data = JSON.parse(response);
              data.forEach(element => {
                    console.log(element)
                    for (let index = parseInt(element.jam_mulai); index <= parseInt(element.jam_selesai); index++) {
                        $(`#jp-${index}`).append(`
                        <td class="p-2 whitespace-nowrap">
                            <div class="text-left">${element.mata_pelajaran}</div>
                        </td>
                        <td class="p-2 whitespace-nowrap">
                            <div class="text-left">${element.kode_guru}</div>
                        </td>`);   
                    }
                });
            }
        })

      
  </script>
</body>
</html>